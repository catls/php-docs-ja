<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>ソースコードからビルド / コンパイルする</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mysql-xdevapi.configuration.html">« 実行時設定</a></li>
      <li style="float: right;"><a href="mysql-xdevapi.constants.html">定義済み定数 »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="mysql-xdevapi.setup.html">インストール/設定</a></li>
    <li>ソースコードからビルド / コンパイルする</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mysql-xdevapi.build" class="section">
   <h2 class="title">ソースコードからビルド / コンパイルする</h2>
   <p class="para">
    この拡張機能をソースコードからコンパイルする際に、考慮すべき事項は以下です。
   </p>

    <ul class="itemizedlist">
      <li class="listitem">
        <p class="para">
          拡張機能の名前は &#039;mysql_xdevapi&#039; です。
          よって、 <em>--enable-mysql-xdevapi</em> を使ってください。
        </p>
      </li>
      <li class="listitem">
        <p class="para">
          Boost が必須です。
          オプションで configure オプション --with-boost=DIR や
          MYSQL_XDEVAPI_BOOST_ROOT 環境変数が使えます。
          boost のヘッダファイルのみが必須で、ライブラリファイルは必要ありません。
        </p>
      </li>
      <li class="listitem">
        <p class="para">
          Google の Protocol Buffers (protobuf) が必須です。
          オプションで configure オプション --with-protobuf=DIR や
          MYSQL_XDEVAPI_PROTOBUF_ROOT 環境変数が使えます。
        </p>
        <p class="para">
          protobuf ファイル (*.pb.cc/.h) を生成するのに
          オプションで <em>make protobufs</em> が使えますし、
          生成された protobuf ファイルを削除するのに
          <em>make clean-protobufs</em> が使えます。
        </p>
        <p class="para">
          Windows 特有の protobuf に関する注意:
          環境によっては、マルチスレッドに対応した
          DLL ランタイムが含まれる静的ライブラリが必要かもしれません。
          これを準備するには、以下のオプションを使ってください:
          <em class="emphasis">-Dprotobuf_MSVC_STATIC_RUNTIME=OFF -Dprotobuf_BUILD_SHARED_LIBS=OFF</em>
        </p>
      </li>
      <li class="listitem">
        <p class="para">
          Google の Protocol Buffers / protocol コンパイラ (protoc) が必須です。
          適切な &#039;protoc&#039; コマンドが ビルド中に PATH が通った場所に置いておいてください。
          このことは、Windows PHP SDK バッチスクリプトが
          この環境変数を上書きする可能性があるため特に重要です。
        </p>
      </li>
        <li class="listitem">
          <p class="para">
            Bison は必須です。PATH が通った場所に置いておいてください。
          </p>
          <p class="para">
            Window 特有の bison に関する注意:
            PHP SDK と同梱されている bison を使うことを強く推奨します。
            さもなければ、次のメッセージに似たエラーが出る可能性があります。

            &quot;zend_globals_macros.h(39):
            error C2375: &#039;zendparse&#039;: redefinition; different linkage
            Zend/zend_language_parser.h(214): note: see declaration of &#039;zendparse&#039;&quot;

            Windows PHP SDK バッチスクリプトが
            環境変数を上書きする可能性があることにも注意してください。
          </p>
        </li>
      <li class="listitem">
        <p class="para">
          Windows 特有の注意:
          環境を準備するために、オフィシャルな Windows ビルドドキュメント
          <a href="https://wiki.php.net/internals/windows/stepbystepbuild" class="link external">&raquo;&nbsp;オリジナルなSDK</a> (古い。PHP-7.1 のみ) または
          <a href="https://wiki.php.net/internals/windows/stepbystepbuild_sdk_2" class="link external">&raquo;&nbsp;現行のSDK</a> (PHP-7.1 以降) 
          を参照してください
        </p>
        <p class="para">
          全てのファイルpathについて、スラッシュ &#039;/&#039; ではなく、
          バックスラッシュ &#039;\\&#039; を使うことを推奨します。
        </p>
      </li>
    </ul>
  </div></div></div></body></html>